<% if (config.matomo_site_id && config.matomo_url) { %>
  <script type="text/javascript">
   var _paq = _paq || [];
   <% if (page && page.is404) { %>
     _paq.push(['setDocumentTitle',  '404/URL = ' +  encodeURIComponent(document.location.pathname+document.location.search) + '/From = ' + encodeURIComponent(document.referrer)]);
   <% } %>
   _paq.push(["trackPageView"]);
   _paq.push(["enableLinkTracking"]);
   (function() {
     var u=(("https:" == document.location.protocol) ? "https://<%= config.matomo_url %>/" : "http://<%= config.matomo_url %>/");
     _paq.push(["setTrackerUrl", u+"js/"]);
     _paq.push(["setSiteId", "<%= config.matomo_site_id %>"]);
     var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
     g.defer=true; g.async=true; g.src=u+"js/"; s.parentNode.insertBefore(g,s);
   })();
  </script>
<% } %>
